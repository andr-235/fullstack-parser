# üß™ API –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–ë—ã–ª–∏ –æ—à–∏–±–∫–∏ 404 –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ API:

```
GET http://localhost/api/v1//api/v1/stats/global 404 (Not Found)
GET http://localhost/api/v1/groups?active_only=true 404 (Not Found)
```

**–ü—Ä–∏—á–∏–Ω–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `/api/v1/` –≤ URL –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π environment –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `NEXT_PUBLIC_API_URL=http://localhost/api/v1/`

## –†–µ—à–µ–Ω–∏–µ

1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ .env.local** - —É–±—Ä–∞–Ω–∞ `NEXT_PUBLIC_API_URL` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö URL –≤ Docker
2. **–û—Ç–∫–ª—é—á–µ–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Next.js** - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Nginx reverse proxy
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ `/api/v1/*` ‚Üí `http://backend:8000/api/v1/*`
4. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã** - –≤—Å–µ —Ö—É–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç apiClient —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ URL
5. **–î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏** - –¥–ª—è –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö endpoints (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
6. **–°–æ–∑–¥–∞–Ω –∞–≤–∞—Ç–∞—Ä –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** - –¥–æ–±–∞–≤–ª–µ–Ω `admin.svg` –≤–º–µ—Å—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ `admin.jpg`

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

```bash
cd /opt/app/frontend
node test-api.js
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å - –æ—à–∏–±–æ–∫ 404 –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ.

### 3. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
# Health check
curl http://localhost/api/v1/health/

# –ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø
curl http://localhost/api/v1/groups

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
curl http://localhost/api/v1/keywords

# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
curl http://localhost/api/v1/comments?size=1

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl http://localhost/api/v1/stats/global
curl http://localhost/api/v1/stats/dashboard
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ **Health check: OK**
‚úÖ **–ì—Ä—É–ø–ø—ã –ø–æ–ª—É—á–µ–Ω—ã: 1993 —ç–ª–µ–º–µ–Ω—Ç–æ–≤**
‚úÖ **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ–ª—É—á–µ–Ω—ã: 0 —ç–ª–µ–º–µ–Ω—Ç–æ–≤**
‚úÖ **–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: OK**
‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞: OK**
‚ö†Ô∏è **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: STUB** (endpoint –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ backend)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Docker)

- **Nginx** (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/api/v1/*` ‚Üí `http://backend:8000/api/v1/*`
- **Frontend** (Next.js –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) –¥–µ–ª–∞–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/v1/*`
- **Backend** (FastAPI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ—Ä—Ç—É 8000
- **apiClient** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç baseURL = '' –¥–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö URL
- **Next.js** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ frontend –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏

## –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏ `.env.local` –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose restart frontend

# –ò–ª–∏ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down && docker-compose up -d
```

## –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å –æ—à–∏–±–∫–∏

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω—ã –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   docker-compose ps
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   ```bash
   docker-compose logs nginx
   docker-compose logs backend
   docker-compose logs frontend
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx:
   ```bash
   docker-compose exec nginx nginx -T
   ```
