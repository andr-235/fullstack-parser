# üöÄ –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–ª–∏–∑–æ–≤

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–∏–∑–∞–º–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ.

## üìã –û–±–∑–æ—Ä

–ù–∞—à –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–ª–∏–∑–æ–≤ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ **—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–º –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏** (SemVer) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ CI/CD pipeline. –ö–∞–∂–¥—ã–π —Ä–µ–ª–∏–∑ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è.

## üè∑Ô∏è –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–æ—Ä–º–∞—Ç `MAJOR.MINOR.PATCH`:

- **MAJOR** (x.0.0) - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
- **MINOR** (0.x.0) - –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **PATCH** (0.0.x) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤, –º–µ–ª–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä—ã –≤–µ—Ä—Å–∏–π:

- `1.0.0` - –ü–µ—Ä–≤—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑
- `1.2.0` - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `1.2.3` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–∞–≥–∏
- `1.2.3-beta.1` - –ë–µ—Ç–∞-–≤–µ—Ä—Å–∏—è
- `1.2.3-rc.1` - Release Candidate

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—à —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–æ–≤:

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/app

# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞
./scripts/create-release.sh
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ–¥–µ—Ç –≤–∞—Å —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å:

1. –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Ä–µ–ª–∏–∑–∞ (major/minor/patch/prerelease)
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π –≤ —Ñ–∞–π–ª–∞—Ö
3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ –∏ push
4. –°–æ–∑–¥–∞–Ω–∏–µ Git Release

### 2. –†—É—á–Ω–æ–π —Å–ø–æ—Å–æ–±

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏–∏ –≤ —Ñ–∞–π–ª–∞—Ö
# backend/pyproject.toml
# frontend/package.json

# 2. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç
git add .
git commit -m "chore: bump version to 1.2.3"

# 3. –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥
git tag -a v1.2.3 -m "Release v1.2.3"

# 4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–≥
git push origin v1.2.3
```

### 3. –ß–µ—Ä–µ–∑ Git UI

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Releases** –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. –ù–∞–∂–∞—Ç—å **"Create a new release"**
3. –í—ã–±—Ä–∞—Ç—å —Ç–µ–≥ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
5. –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å

## üõ†Ô∏è CI/CD Workflow

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ–≥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è CI/CD pipeline:

### –≠—Ç–∞–ø—ã –ø—Ä–æ—Ü–µ—Å—Å–∞:

1. **üõ°Ô∏è Validate Release** - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–µ—Ä—Å–∏–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. **üîí Security Scan** - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π (Trivy)
3. **üì¶ Dependency Check** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. **üêç Backend Tests** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ backend —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
5. **‚öõÔ∏è Frontend Tests** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ frontend —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
6. **üê≥ Build and Push** - –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è Docker –æ–±—Ä–∞–∑–æ–≤
7. **üéâ Create Release** - –°–æ–∑–¥–∞–Ω–∏–µ Git Release —Å changelog
8. **üöÄ Deploy Staging** - –î–µ–ø–ª–æ–π –Ω–∞ staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ
9. **üì¢ Notify Team** - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
10. **üßπ Cleanup** - –û—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### Docker –æ–±—Ä–∞–∑—ã

–ö–∞–∂–¥—ã–π —Ä–µ–ª–∏–∑ —Å–æ–∑–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–±—Ä–∞–∑—ã:

- `registry.example.com/backend:VERSION`
- `registry.example.com/frontend:VERSION`
- `registry.example.com/arq-worker:VERSION`

–¢–∞–∫–∂–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–µ–≥–∏:

- `latest` - –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- `MAJOR.MINOR` - –ú–∏–Ω–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è
- `MAJOR` - –ú–∞–∂–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è
- `sha-XXXXX` - SHA –∫–æ–º–º–∏—Ç–∞

## üìù Changelog

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ:

- Pull Request —Å –ª–µ–π–±–ª–∞–º–∏
- Issues —Å –ª–µ–π–±–ª–∞–º–∏
- Conventional Commits

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏:

- üöÄ **Features** - –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- üêõ **Bug Fixes** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤
- üìÑ **Documentation** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üß™ **Testing** - –¢–µ—Å—Ç—ã
- ‚öôÔ∏è **Miscellaneous** - –ü—Ä–æ—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í CI/CD Secrets –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:

- `REGISTRY_TOKEN` - –¢–æ–∫–µ–Ω –¥–ª—è Container Registry
- `CODECOV_TOKEN` - –¢–æ–∫–µ–Ω –¥–ª—è Codecov (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `SLACK_WEBHOOK_URL` - Webhook –¥–ª—è Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Environments

–ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ environments:

- `staging` - –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- `production` - –ü—Ä–æ–¥–∞–∫—à–µ–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–µ

## üö® –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑

–í —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑:

1. –ß–µ—Ä–µ–∑ CI/CD UI:

   - –ü–µ—Ä–µ–π—Ç–∏ –≤ CI/CD ‚Üí Release Pipeline
   - –ù–∞–∂–∞—Ç—å "Run pipeline"
   - –í–≤–µ—Å—Ç–∏ –≤–µ—Ä—Å–∏—é
   - –ü–æ—Å—Ç–∞–≤–∏—Ç—å –≥–∞–ª–æ—á–∫—É "force"

2. –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   # –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥ –≤—Ä—É—á–Ω—É—é
   git tag -a v1.2.3 -m "Emergency release"
   git push origin v1.2.3
   ```

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç:

- Security scan
- Dependency check
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–ª–∏–∑–æ–≤

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:

- CI/CD Pipeline: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ CI/CD —Å–∏—Å—Ç–µ–º–µ
- Releases: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- Docker Hub: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ Container Registry

### –ú–µ—Ç—Ä–∏–∫–∏:

- –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ—è

## üîÑ Rollback

–í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º —Å —Ä–µ–ª–∏–∑–æ–º:

### 1. –û—Ç–∫–∞—Ç Docker –æ–±—Ä–∞–∑–æ–≤:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker-compose -f docker-compose.prod.ip.yml up -d --remove-orphans PREVIOUS_VERSION
```

### 2. –û—Ç–∫–∞—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup
./scripts/restore_db.sh backup/YYYY-MM-DD_HH-MM-SS.sql
```

### 3. –û—Ç–∫–∞—Ç –∫–æ–¥–∞:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ hotfix
git checkout -b hotfix/rollback-v1.2.3
git revert v1.2.3
git push origin hotfix/rollback-v1.2.3
```

## üìã Checklist –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –õ–∏–Ω—Ç–µ—Ä—ã –Ω–µ –≤—ã–¥–∞—é—Ç –æ—à–∏–±–æ–∫
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Changelog —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –í–µ—Ä—Å–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
- [ ] Staging –¥–µ–ø–ª–æ–π –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –ö–æ–º–∞–Ω–¥–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∞ –æ —Ä–µ–ª–∏–∑–µ

## üÜò Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **Workflow –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**

   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ç–µ–≥–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å v*.*.\*)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

2. **Docker build fails**

   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Dockerfile
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

3. **Tests fail**

   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤

4. **Deploy fails**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å secrets
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å docker-compose —Ñ–∞–π–ª

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ CI/CD pipeline
2. –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. –°–æ–∑–¥–∞—Ç—å issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Semantic Versioning](https://semver.org/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [CI/CD Documentation](https://docs.example.com/cicd)
- [Docker Hub](https://docs.docker.com/docker-hub/)
- [Trivy Security Scanner](https://aquasecurity.github.io/trivy/)
